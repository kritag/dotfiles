PF_INFO="ascii title os host kernel wm editor uptime shell de palette" /usr/local/bin/pfetch 
# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

#DOTFILES="$HOME/.dotfiles"
source $HOME/.aliases
source $HOME/.env

PATH="${PATH}:$HOME/.local/bin:$HOME/bin:/home/linuxbrew/.linuxbrew/bin:${KREW_ROOT:-$HOME/.krew}/bin"; export PATH;

FPATH="$(brew --prefix)/share/zsh/site-functions:${FPATH}"

autoload -Uz compinit
if [[ -n ${ZDOTDIR}/.zcompdump(#qN.mh+24) ]]; then
	compinit;
else
	compinit -C;
fi;
#ZSH_COMPDUMP=${ZSH_COMPDUMP:-${ZDOTDIR:-~}/.zcompdump}

# cache .zcompdump for about a day
#if [[ $ZSH_COMPDUMP(#qNmh-20) ]]; then
#  compinit -C -d "$ZSH_COMPDUMP"
#else
#  compinit -i -d "$ZSH_COMPDUMP"; touch "$ZSH_COMPDUMP"
#fi
#{
#  # compile .zcompdump
#  if [[ -s "$ZSH_COMPDUMP" && (! -s "${ZSH_COMPDUMP}.zwc" || "$ZSH_COMPDUMP" -nt "${ZSH_COMPDUMP}.zwc") ]]; then
#    zcompile "$ZSH_COMPDUMP"
#  fi
#} &!

#source $DOTFILES/zsh/antidote/antidote.zsh
source $HOME/.antidote/antidote.zsh
antidote load

# Ensure up and down arrow works for searching history
bindkey '^[[A' history-substring-search-up
bindkey '^[OA' history-substring-search-up
bindkey '^[[B' history-substring-search-down
bindkey '^[OB' history-substring-search-down

# Ensuring that autocomplete works with sshpass aliases
#setopt completealiases
compdef _ssh_hosts sshpass s sr
zstyle -e ':completion:*' hosts 'reply=($(< ~/.ssh/ssh_hosts))'

# Display system info https://github.com/dylanaraps/pfetch
#PF_INFO="ascii title os host kernel wm editor uptime shell de palette" /usr/local/bin/pfetch 

# Sourcing k8s related stuff and prompt if using k8s
#if command -v kubectl &> /dev/null
#then
#    source $DOTFILES/zsh/functions_k8s
#fi

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
source $HOME/.zshenv
